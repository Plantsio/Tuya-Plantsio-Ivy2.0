<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TuyaOS: include/components/lib_tls/include/psa/crypto_compat.h 文件参考</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TuyaOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'搜索','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_d44c64559bbebec7f509842c48db8b23.html">include</a></li><li class="navelem"><a class="el" href="../../dir_d66e8d5a7776834ccee339fd5fd3e729.html">components</a></li><li class="navelem"><a class="el" href="../../dir_e0ad759426b81a2a916f0c214904fb04.html">lib_tls</a></li><li class="navelem"><a class="el" href="../../dir_f30d89c772c5acecb10afd330b16abb6.html">include</a></li><li class="navelem"><a class="el" href="../../dir_eefea1140a0d03ec06557abf451e332b.html">psa</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#define-members">宏定义</a> &#124;
<a href="#typedef-members">类型定义</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle"><div class="title">crypto_compat.h 文件参考</div></div>
</div><!--header-->
<div class="contents">

<p>PSA cryptography module: Backward compatibility aliases  
<a href="#details">更多...</a></p>
<div class="textblock"><div class="dynheader">
此图展示该文件直接或间接的被哪些文件引用了:</div>
<div class="dyncontent">
<div class="center"><img src="../../d5/d9c/crypto__compat_8h__dep__incl.png" border="0" usemap="#ainclude_2components_2lib__tls_2include_2psa_2crypto__compat_8hdep" alt=""/></div>
<map name="ainclude_2components_2lib__tls_2include_2psa_2crypto__compat_8hdep" id="ainclude_2components_2lib__tls_2include_2psa_2crypto__compat_8hdep">
<area shape="rect" title="PSA cryptography module: Backward compatibility aliases" alt="" coords="5,5,159,61"/>
<area shape="rect" href="../../d8/de6/crypto__extra_8h.html" title="PSA cryptography module: Mbed TLS vendor extensions" alt="" coords="5,109,159,165"/>
<area shape="rect" href="../../da/da0/crypto_8h.html" title="Platform Security Architecture cryptography module" alt="" coords="5,213,159,269"/>
</map>
</div>
</div>
<p><a href="../../d1/d14/crypto__compat_8h_source.html">浏览源代码.</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:a95017cf75d44a5ce463d585740a9bcf6"><td class="memItemLeft" align="right" valign="top"><a id="a95017cf75d44a5ce463d585740a9bcf6" name="a95017cf75d44a5ce463d585740a9bcf6"></a>
#define&#160;</td><td class="memItemRight" valign="bottom"><b>PSA_KEY_HANDLE_INIT</b>&#160;&#160;&#160;MBEDTLS_SVC_KEY_ID_INIT</td></tr>
<tr class="separator:a95017cf75d44a5ce463d585740a9bcf6"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="typedef-members" name="typedef-members"></a>
类型定义</h2></td></tr>
<tr class="memitem:a0a6f2a05474d7789332f228946840504"><td class="memItemLeft" align="right" valign="top"><a id="a0a6f2a05474d7789332f228946840504" name="a0a6f2a05474d7789332f228946840504"></a>
typedef mbedtls_svc_key_id_t&#160;</td><td class="memItemRight" valign="bottom"><b>psa_key_handle_t</b></td></tr>
<tr class="separator:a0a6f2a05474d7789332f228946840504"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:aa09b720d299dfe6b9f41c36e448078eb"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d19/group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/crypto__compat_8h.html#aa09b720d299dfe6b9f41c36e448078eb">psa_close_key</a> (psa_key_handle_t handle)</td></tr>
<tr class="separator:aa09b720d299dfe6b9f41c36e448078eb"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a950f0f358a0a012b043d02e55faed7c0"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d19/group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/d14/crypto__compat_8h.html#a950f0f358a0a012b043d02e55faed7c0">psa_open_key</a> (mbedtls_svc_key_id_t key, psa_key_handle_t *handle)</td></tr>
<tr class="separator:a950f0f358a0a012b043d02e55faed7c0"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<div class="textblock"><p >PSA cryptography module: Backward compatibility aliases </p>
<p >This header declares alternative names for macro and functions. New application code should not use these names. These names may be removed in a future version of Mbed Crypto.</p>
<dl class="section note"><dt>注解</dt><dd>This file may not be included directly. Applications must include <a class="el" href="../../da/da0/crypto_8h.html" title="Platform Security Architecture cryptography module">psa/crypto.h</a>. </dd></dl>
</div><h2 class="groupheader">函数说明</h2>
<a id="aa09b720d299dfe6b9f41c36e448078eb" name="aa09b720d299dfe6b9f41c36e448078eb"></a>
<h2 class="memtitle"><span class="permalink"><a href="#aa09b720d299dfe6b9f41c36e448078eb">&#9670;&nbsp;</a></span>psa_close_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d19/group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_close_key </td>
          <td>(</td>
          <td class="paramtype">psa_key_handle_t&#160;</td>
          <td class="paramname"><em>handle</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Close a key handle.</p>
<p >If the handle designates a volatile key, this will destroy the key material and free all associated resources, just like <a class="el" href="../../da/d20/group__key__management.html#ga5f52644312291335682fbc0292c43cd2" title="Destroy a key.">psa_destroy_key()</a>.</p>
<p >If this is the last open handle to a persistent key, then closing the handle will free all resources associated with the key in volatile memory. The key data in persistent storage is not affected and can be opened again later with a call to <a class="el" href="../../d1/d14/crypto__compat_8h.html#a950f0f358a0a012b043d02e55faed7c0">psa_open_key()</a>.</p>
<p >Closing the key handle makes the handle invalid, and the key handle must not be used again by the application.</p>
<dl class="section note"><dt>注解</dt><dd>This API is not part of the PSA Cryptography API Release 1.0.0 specification. It was defined in the 1.0 Beta 3 version of the specification but was removed in the 1.0.0 released version. This API is kept for the time being to not break applications relying on it. It is not deprecated yet but will be in the near future.</dd>
<dd>
If the key handle was used to set up an active :ref:`multipart operation &lt;multipart-operations&gt;`, then closing the key handle can cause the multipart operation to fail. Applications should maintain the key handle until after the multipart operation has finished.</dd></dl>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramname">handle</td><td>The key handle to close. If this is <code>0</code>, do nothing and return <code>PSA_SUCCESS</code>.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga4cc859e2c66ca381c7418db3527a65e1">PSA_SUCCESS</a></td><td><code>handle</code> was a valid handle or <code>0</code>. It is now closed. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#gadf22718935657c2c3168c228204085f9">PSA_ERROR_INVALID_HANDLE</a></td><td><code>handle</code> is not a valid handle nor <code>0</code>. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga5cdb6948371d49e916106249020ea3f7">PSA_ERROR_COMMUNICATION_FAILURE</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga116f4d4c6a9d9db3397991a8472d8950">PSA_ERROR_CORRUPTION_DETECTED</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga933d40fa2a591004f2e93aa91e11db84">PSA_ERROR_BAD_STATE</a></td><td>The library has not been previously initialized by <a class="el" href="../../d4/d97/group__initialization.html#ga2de150803fc2f7dc6101d5af7e921dd9" title="Library initialization.">psa_crypto_init()</a>. It is implementation-dependent whether a failure to initialize results in this error code. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
<a id="a950f0f358a0a012b043d02e55faed7c0" name="a950f0f358a0a012b043d02e55faed7c0"></a>
<h2 class="memtitle"><span class="permalink"><a href="#a950f0f358a0a012b043d02e55faed7c0">&#9670;&nbsp;</a></span>psa_open_key()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d19/group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_open_key </td>
          <td>(</td>
          <td class="paramtype">mbedtls_svc_key_id_t&#160;</td>
          <td class="paramname"><em>key</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">psa_key_handle_t *&#160;</td>
          <td class="paramname"><em>handle</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Open a handle to an existing persistent key.</p>
<p >Open a handle to a persistent key. A key is persistent if it was created with a lifetime other than <a class="el" href="../../db/ddf/group__key__lifetimes.html#ga8b438870ba69489b685730d346455108">PSA_KEY_LIFETIME_VOLATILE</a>. A persistent key always has a nonzero key identifier, set with psa_set_key_id() when creating the key. Implementations may provide additional pre-provisioned keys that can be opened with <a class="el" href="../../d1/d14/crypto__compat_8h.html#a950f0f358a0a012b043d02e55faed7c0">psa_open_key()</a>. Such keys have an application key identifier in the vendor range, as documented in the description of <a class="el" href="../../db/ddf/group__key__lifetimes.html#ga11e986351c65bd3dc3c0fe2cd9926e4b">psa_key_id_t</a>.</p>
<p >The application must eventually close the handle with <a class="el" href="../../d1/d14/crypto__compat_8h.html#aa09b720d299dfe6b9f41c36e448078eb">psa_close_key()</a> or <a class="el" href="../../da/d20/group__key__management.html#ga5f52644312291335682fbc0292c43cd2" title="Destroy a key.">psa_destroy_key()</a> to release associated resources. If the application dies without calling one of these functions, the implementation should perform the equivalent of a call to <a class="el" href="../../d1/d14/crypto__compat_8h.html#aa09b720d299dfe6b9f41c36e448078eb">psa_close_key()</a>.</p>
<p >Some implementations permit an application to open the same key multiple times. If this is successful, each call to <a class="el" href="../../d1/d14/crypto__compat_8h.html#a950f0f358a0a012b043d02e55faed7c0">psa_open_key()</a> will return a different key handle.</p>
<dl class="section note"><dt>注解</dt><dd>This API is not part of the PSA Cryptography API Release 1.0.0 specification. It was defined in the 1.0 Beta 3 version of the specification but was removed in the 1.0.0 released version. This API is kept for the time being to not break applications relying on it. It is not deprecated yet but will be in the near future.</dd>
<dd>
Applications that rely on opening a key multiple times will not be portable to implementations that only permit a single key handle to be opened. See also :ref:`key-handles`.</dd></dl>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">key</td><td>The persistent identifier of the key. </td></tr>
    <tr><td class="paramdir">[out]</td><td class="paramname">handle</td><td>On success, a handle to the key.</td></tr>
  </table>
  </dd>
</dl>
<dl class="retval"><dt>返回值</dt><dd>
  <table class="retval">
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga4cc859e2c66ca381c7418db3527a65e1">PSA_SUCCESS</a></td><td>Success. The application can now use the value of <code>*handle</code> to access the key. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga91b2ad8a867517a2651f1b076c5216e5">PSA_ERROR_INSUFFICIENT_MEMORY</a></td><td>The implementation does not have sufficient resources to open the key. This can be due to reaching an implementation limit on the number of open keys, the number of open key handles, or available memory. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga18646babb2ae6cbde02ea3828bbd9141">PSA_ERROR_DOES_NOT_EXIST</a></td><td>There is no persistent key with key identifier <code>key</code>. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga798df25a505ebf931f7bec1f80f1f85f">PSA_ERROR_INVALID_ARGUMENT</a></td><td><code>key</code> is not a valid persistent key identifier. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga4d1b8dd8526177a15a210b7afc1accb1">PSA_ERROR_NOT_PERMITTED</a></td><td>The specified key exists, but the application does not have the permission to access it. Note that this specification does not define any way to create such a key, but it may be possible through implementation-specific means. </td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga5cdb6948371d49e916106249020ea3f7">PSA_ERROR_COMMUNICATION_FAILURE</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga116f4d4c6a9d9db3397991a8472d8950">PSA_ERROR_CORRUPTION_DETECTED</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#gadd169a1af2707862b95fb9df91dfc37d">PSA_ERROR_STORAGE_FAILURE</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#gacebfbd25a7c2a727694fb57182a66533">PSA_ERROR_DATA_INVALID</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga9febb81a44bdeb4c6c42bf4f697b13bf">PSA_ERROR_DATA_CORRUPT</a></td><td></td></tr>
    <tr><td class="paramname"><a class="el" href="../../d9/d19/group__error.html#ga933d40fa2a591004f2e93aa91e11db84">PSA_ERROR_BAD_STATE</a></td><td>The library has not been previously initialized by <a class="el" href="../../d4/d97/group__initialization.html#ga2de150803fc2f7dc6101d5af7e921dd9" title="Library initialization.">psa_crypto_init()</a>. It is implementation-dependent whether a failure to initialize results in this error code. </td></tr>
  </table>
  </dd>
</dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
