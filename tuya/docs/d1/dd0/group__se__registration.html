<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.4"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>TuyaOS: Secure element driver registration</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">TuyaOS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.9.4 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search",'搜索','.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','搜索');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="summary">
<a href="#nested-classes">结构体</a> &#124;
<a href="#define-members">宏定义</a> &#124;
<a href="#func-members">函数</a>  </div>
  <div class="headertitle"><div class="title">Secure element driver registration</div></div>
</div><!--header-->
<div class="contents">
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="structs" name="structs"></a>
结构体</h2></td></tr>
<tr class="memitem:"><td class="memItemLeft" align="right" valign="top">struct &#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d9/d00/structpsa__drv__se__t.html">psa_drv_se_t</a></td></tr>
<tr class="separator:"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="define-members" name="define-members"></a>
宏定义</h2></td></tr>
<tr class="memitem:ga65e25a718c3e95893522ae882d4ea826"><td class="memItemLeft" align="right" valign="top">#define&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dd0/group__se__registration.html#ga65e25a718c3e95893522ae882d4ea826">PSA_DRV_SE_HAL_VERSION</a>&#160;&#160;&#160;0x00000005</td></tr>
<tr class="separator:ga65e25a718c3e95893522ae882d4ea826"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
函数</h2></td></tr>
<tr class="memitem:ga99b3afa3fcdf0599706e606119d87182"><td class="memItemLeft" align="right" valign="top"><a class="el" href="../../d9/d19/group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a>&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="../../d1/dd0/group__se__registration.html#ga99b3afa3fcdf0599706e606119d87182">psa_register_se_driver</a> (<a class="el" href="../../db/ddf/group__key__lifetimes.html#ga5e700601f686237a8d1e29363ae543d5">psa_key_location_t</a> location, const <a class="el" href="../../d9/d00/structpsa__drv__se__t.html">psa_drv_se_t</a> *methods)</td></tr>
<tr class="separator:ga99b3afa3fcdf0599706e606119d87182"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">详细描述</h2>
<h2 class="groupheader">宏定义说明</h2>
<a id="ga65e25a718c3e95893522ae882d4ea826" name="ga65e25a718c3e95893522ae882d4ea826"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga65e25a718c3e95893522ae882d4ea826">&#9670;&nbsp;</a></span>PSA_DRV_SE_HAL_VERSION</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">#define PSA_DRV_SE_HAL_VERSION&#160;&#160;&#160;0x00000005</td>
        </tr>
      </table>
</div><div class="memdoc">
<p >The current version of the secure element driver HAL. </p>

</div>
</div>
<h2 class="groupheader">函数说明</h2>
<a id="ga99b3afa3fcdf0599706e606119d87182" name="ga99b3afa3fcdf0599706e606119d87182"></a>
<h2 class="memtitle"><span class="permalink"><a href="#ga99b3afa3fcdf0599706e606119d87182">&#9670;&nbsp;</a></span>psa_register_se_driver()</h2>

<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname"><a class="el" href="../../d9/d19/group__error.html#ga05676e70ba5c6a7565aff3c36677c1f9">psa_status_t</a> psa_register_se_driver </td>
          <td>(</td>
          <td class="paramtype"><a class="el" href="../../db/ddf/group__key__lifetimes.html#ga5e700601f686237a8d1e29363ae543d5">psa_key_location_t</a>&#160;</td>
          <td class="paramname"><em>location</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">const <a class="el" href="../../d9/d00/structpsa__drv__se__t.html">psa_drv_se_t</a> *&#160;</td>
          <td class="paramname"><em>methods</em>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p >Register an external cryptoprocessor (secure element) driver.</p>
<p >This function is only intended to be used by driver code, not by application code. In implementations with separation between the PSA cryptography module and applications, this function should only be available to callers that run in the same memory space as the cryptography module, and should not be exposed to applications running in a different memory space.</p>
<p >This function may be called before <a class="el" href="../../d4/d97/group__initialization.html#ga2de150803fc2f7dc6101d5af7e921dd9" title="Library initialization.">psa_crypto_init()</a>. It is implementation-defined whether this function may be called after <a class="el" href="../../d4/d97/group__initialization.html#ga2de150803fc2f7dc6101d5af7e921dd9" title="Library initialization.">psa_crypto_init()</a>.</p>
<dl class="section note"><dt>注解</dt><dd>Implementations store metadata about keys including the lifetime value, which contains the driver's location indicator. Therefore, from one instantiation of the PSA Cryptography library to the next one, if there is a key in storage with a certain lifetime value, you must always register the same driver (or an updated version that communicates with the same secure element) with the same location value.</dd></dl>
<dl class="params"><dt>参数</dt><dd>
  <table class="params">
    <tr><td class="paramdir"></td><td class="paramname">location</td><td>The location value through which this driver will be exposed to applications. This driver will be used for all keys such that <code>location == #PSA_KEY_LIFETIME_GET_LOCATION( lifetime )</code>. The value <a class="el" href="../../db/ddf/group__key__lifetimes.html#ga3fbfe4a4cf7430a51cf740fe05b2ab27">PSA_KEY_LOCATION_LOCAL_STORAGE</a> is reserved and may not be used for drivers. Implementations may reserve other values. </td></tr>
    <tr><td class="paramdir">[in]</td><td class="paramname">methods</td><td>The method table of the driver. This structure must remain valid for as long as the cryptography module keeps running. It is typically a global constant.</td></tr>
  </table>
  </dd>
</dl>
<dl class="section return"><dt>返回</dt><dd><a class="el" href="../../d9/d19/group__error.html#ga4cc859e2c66ca381c7418db3527a65e1">PSA_SUCCESS</a> The driver was successfully registered. Applications can now use <code>location</code> to access keys through the methods passed to this function. </dd>
<dd>
<a class="el" href="../../d9/d19/group__error.html#ga933d40fa2a591004f2e93aa91e11db84">PSA_ERROR_BAD_STATE</a> This function was called after the initialization of the cryptography module, and this implementation does not support driver registration at this stage. </dd>
<dd>
<a class="el" href="../../d9/d19/group__error.html#gaf2b34cc87edc72f3ba90071a08210d20">PSA_ERROR_ALREADY_EXISTS</a> There is already a registered driver for this value of <code>location</code>. </dd>
<dd>
<a class="el" href="../../d9/d19/group__error.html#ga798df25a505ebf931f7bec1f80f1f85f">PSA_ERROR_INVALID_ARGUMENT</a> <code>location</code> is a reserved value. </dd>
<dd>
<a class="el" href="../../d9/d19/group__error.html#ga1dcc6d130633ed5db8942257581b55dd">PSA_ERROR_NOT_SUPPORTED</a> <code>methods-&gt;hal_version</code> is not supported by this implementation. </dd>
<dd>
<a class="el" href="../../d9/d19/group__error.html#ga91b2ad8a867517a2651f1b076c5216e5">PSA_ERROR_INSUFFICIENT_MEMORY</a> </dd>
<dd>
<a class="el" href="../../d9/d19/group__error.html#ga4d1b8dd8526177a15a210b7afc1accb1">PSA_ERROR_NOT_PERMITTED</a> </dd>
<dd>
<a class="el" href="../../d9/d19/group__error.html#gadd169a1af2707862b95fb9df91dfc37d">PSA_ERROR_STORAGE_FAILURE</a> </dd>
<dd>
<a class="el" href="../../d9/d19/group__error.html#ga9febb81a44bdeb4c6c42bf4f697b13bf">PSA_ERROR_DATA_CORRUPT</a> </dd></dl>

</div>
</div>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.4
</small></address>
</body>
</html>
